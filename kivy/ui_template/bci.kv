#:import Label kivymd.label.Label

<FlashButton@Button>
	background_color: (0,0,0,1) if self.state == 'normal' else (1,1,1,1)
	background_normal: 'disable.png'
	background_down: 'disable.png'

<FFT>:
	orientation: 'vertical'
	spacing:'2dp'

	BoxLayout:
		size_hint:(1,0.05)
		spacing:'2dp'
		Label:
			size_hint:(0.3,1)
			text:"Scale"
		Label:
			size_hint:(0.3,1)
			text:"Horizon"
		Label:
			size_hint:(0.2,1)
			text:"FFT Len"
		Label:
			size_hint:(0.2,1)
			text:"Scale"
	BoxLayout:
		spacing:'2dp'
		size_hint:(1,0.1)
		Slider:
			size_hint:(0.3,1)
			id:xscale
			range:(1,self.parent.parent.fs/4)
			value:1
			on_value:self.parent.parent.set_xscale()
		Slider:
			size_hint:(0.3,1)
			id:horizon
			range:(self.parent.parent.fs/4,self.parent.parent.fs/4)
			value:self.parent.parent.fs/4
			on_value:self.parent.parent.set_horizontal_width()
		Spinner:
			id:fftLen
			size_hint:(0.2,1)
			text:'128'
			values:('32', '64', '128', '256','512','1024')
			on_text: self.parent.parent.set_fft_length()
		Spinner:
			id:scale
			size_hint:(0.2,1)
			text:'Auto'
			values:('Auto', '10μV', '100μV', '1mV','10mV','100mV','1000mV')
			on_text:self.parent.parent.set_scale()

<SerialPortSelection>:
	spacing:'10dp'
	orientation:'horizontal'
	Spinner:
		id:uart
		#text:''
		#values:()
		size_hint:(0.7,1)

	Button:
		size_hint:(0.2,1)
		text:'Refresh'
		on_press: self.parent.scanPorts(0)

	ToggleButton:
		id:connect
		size_hint:(0.2,1)
		text:'Connect'
		on_state: self.parent.changeState(self.state)

<RealTimePlotting>:
	orientation:'vertical'
	spacing:'2dp'
	BoxLayout:
		size_hint:(1,0.05)
		spacing:"5dp"
		Label:
			text:"Filter"
			size_hint:(0.2,1)
		Label:
			text:"Notch"
			size_hint:(0.2,1)
		Label:
			text:"Length"
			size_hint:(0.2,1)
	BoxLayout:
		spacing:"5dp"
		size_hint:(1,0.1)
		Spinner:
			id:filters
			size_hint:(0.2,1)
			text:'None'
			values:('None',)
			on_text: self.parent.parent.set_filter()
		Spinner:
			id:notch
			size_hint:(0.2,1)
			text:'50Hz'
			values:('50Hz', '60Hz')
			on_text: self.parent.parent.set_notch()
		Spinner:
			id:length
			size_hint:(0.2,1)
			text:'4s'
			values:('0.5s','1s', '2s', '3s', '4s')
			on_text: self.parent.parent.set_length()

<Test>:
    orientation: 'vertical'
	BoxLayout:
		orientation: 'horizontal'
		padding:'10dp'
		spacing:'10dp'
		canvas.before:
			Rectangle:
				pos: self.pos
				size: self.size
				source:'ui_template/background.jpg'

		BoxLayout:
			orientation: 'vertical'
			padding:'10dp'
			spacing:'10dp'

			FFT:
				id: FFT

			RealTimePlotting:
				#color:0,1,0,0.5
				#id:realTimeFFT
				id:RealTimePlotting
				#text:'FFT'
				#background_normal: 'images/button_normal.png'
			SerialPortSelection:
				size_hint:(1,0.2)
				#sync_height: True

		BoxLayout:
			orientation: 'vertical'
			padding:'10dp'
			spacing:'10dp'

			CodeInput:
				size_hint:(1,0.3)
				text:'Please input your password'

			GridLayout:
				padding:'10dp'
				spacing:'10dp'
				cols:3

				FlashButton:
					id:button1
					text:'1'

				FlashButton:
					id:button2
					text:'2'

				FlashButton:
					id:button3
					text:'3'

				FlashButton:
					id:button4
					text:'4'

				FlashButton:
					id:button5
					text:'5'

				FlashButton:
					id:button6
					text:'6'

				FlashButton:
					id:button7
					text:'7'

				FlashButton:
					id:button8
					text:'8'

				FlashButton:
					id:button9
					text:'9'

				FlashButton:
					id:button10
					text:'Confirm'

				FlashButton:
					id:button0
					text:'0'

				FlashButton:
					id:button11
					text:'Cancel'
